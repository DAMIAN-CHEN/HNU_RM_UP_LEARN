# HNU_RMUL_UP_2022

#### 介绍
海南大学2022赛季联盟赛，重构的步兵云台代码

#### 软件架构

1. APP文件中为主要的任务函数
2. Transmission.c中主要包含云台和底盘以及上位机之间的通信
3. 云台和底盘的通信的接受回调部分在bsp_can.c中
4. Shoot.c主要控制摩擦轮和拨弹电机
5. Gimbal.c主要控制yaw轴和pitch轴两电机
6. Detect.c主要负责异常检测

#### 使用说明

1. 开机前，将遥控器右SW2拨杆拨至最上

2. 出现异常情况，关闭遥控器或将遥控器右SW2拨杆拨至最下，可以使云台失能，进入离线模式

3. 云台每次从离线模式恢复运行时，都会先初始化归中，才能进入后续的控制

4. SW2_UP为普通模式，SW2_MI为自瞄模式，SW2_DW为离线模式

5. 客户端控制时，将遥控器拨至SW2_UP，长按鼠标右键可以进入自瞄模式，松开返回普通模式

6. 遥控摩擦轮的操作：

   | 打开摩擦轮 | 将遥控器左SW1拨杆从不是SW1_UP的位置切到SW1_UP |
   | ---------- | --------------------------------------------- |
   | 关闭摩擦轮 | 将遥控器左SW1拨杆从不是SW1_UP的位置切到SW1_UP |

7. 遥控射击操作：

   | 单发 | 打开摩擦轮后，将遥控器左SW1拨杆从不是SW1_MI的位置切到SW1_MI |
   | ---- | ----------------------------------------------------------- |
   | 连发 | 打开摩擦轮后，将遥控器左SW1拨杆停留在SW1_MI的位置           |

8. 客户端摩擦轮的操作：

   | 打开摩擦轮 | 键盘Q键         |
   | ---------- | --------------- |
   | 关闭摩擦轮 | 键盘SHIFT + Q键 |

9. 客户端射击操作：

   | 单发   | 点击鼠标左键            |
   | ------ | ----------------------- |
   | 三连发 | 键盘SHIFT键             |
   | 连发   | 键盘SHIFT键 +  鼠标右键 |

10. （考虑加入键盘B键重置imu值）